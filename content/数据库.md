
### 1. innodb索引，B+树结构，优劣

Innodb使用了 `聚集索引` 存储数据。

 __聚集索引（Clustered Index）__

一个聚集索引定义了表中数据的物理存储顺序。因为聚集索引决定了表中数据的物理存储顺序，那么一个表则有且只有一个聚集索引。一个聚集索引可以包含多个列。好比一个电话本是基于名字，姓氏同时排序。

__Innodb的聚集索引__

 Innodb的存储索引是基于B+tree。与非聚集索引的区别则是，聚集索引既存储了索引，也存储了行值。当一个表有一个聚集索引，它的数据是存储在索引的叶子页（leaf pages）。因此innodb也能理解为基于索引的表。

 __聚集索引的优点__

 首先是B+树查找速度本身就快，所以查找一个数据的时间很短；其次，聚集索引是按照key的顺序来存储的，所以对于范围查找，可以快速的检索相邻行直到最后一个数据。

__聚集索引的缺点__

如果一个很大的聚集索引被定义，那么所有的次级索引会显得很大。同时，若聚集索引的键值被更改，数据会重排，开销很大。

### 2. 索引的实现，用的什么数据结构，b+tree的特点
innodb引擎的主索引和辅助索引都是通过B+树实现的。B+Tree的特点是内节点不存储data数据，只存储指针和key。
而且B+Tree每个节点的指针上限是2N（B-Tree的指针上限是2N+1）。

### 3. mysql 哪些列需要加索引

* 主键,外键需要索引
* 进场与其他表进行连接的表,连接字段需要索引
* 出现在 where 后面的字段
* 选择性高的字段,及重复度低的字段
* 索引要建立在小字段上
* 经常进行修改的字段,不应该建立索引.应该修改字段会同时更新索引,影响性能

### 4. 数据库索引b+树详细说说
参照问题1和问题2。参考资料1

### 5. MyISAM叶子节点是数据文件的地址
这句话没错，记住InnoDB叶子节点存的是data，而MyISAM叶子结点存的是指针。参考资料1

### 6. 不同索引使用场景大概说几个
1. __B+Tree 索引__

   是大多数 MySQL 存储引擎的默认索引类型。

   因为不再需要进行全表扫描，只需要对树进行搜索即可，因此查找速度快很多。除了用于查找，还可以用于排序和分组。

   可以指定多个列作为索引列，多个索引列共同组成键。B+Tree 索引适用于全键值、键值范围和键前缀查找，其中键前缀查找只适用于最左前缀查找.

   如果不是按照索引列的顺序进行查找，则无法使用索引。
   InnoDB 的 B+Tree 索引分为主索引和辅助索引。
2. __哈希索引__

  InnoDB 引擎有一个特殊的功能叫“自适应哈希索引”，当某个索引值被使用的非常频繁时，会在 B+Tree 索引之上再创建一个哈希索引，这样就让 B+Tree 索引具有哈希索引的一些优点，比如快速的哈希查找。

  哈希索引能以 O(1) 时间进行查找，但是失去了有序性，它具有以下限制：

  无法用于排序与分组；
  只支持精确查找，无法用于部分查找和范围查找；

3. __全文索引__

  MyISAM 存储引擎支持全文索引，用于查找文本中的关键词，而不是直接比较是否相等。查找条件使用 MATCH AGAINST，而不是普通的 WHERE。

  全文索引一般使用倒排索引实现，它记录着关键词到其所在文档的映射。

  InnoDB 存储引擎在 MySQL 5.6.4 版本中也开始支持全文索引。

4. __空间数据索引__

  MyISAM 存储引擎支持空间数据索引，可以用于地理数据存储。空间数据索引会从所有维度来索引数据，可以有效地使用任意维度来进行组合查询。

---

## 参考资料
1. https://github.com/CyC2018/Interview-Notebook
